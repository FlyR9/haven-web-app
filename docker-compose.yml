version: "3.7"
services:
  back:
    build:
      context: ./
      dockerfile: resources/Dockerfile-back
      args:
        BACK_NR_LICENCE: ${BACK_NR_LICENCE}
    environment:
      NETWORK: ${BACK_NETWORK}
      PORT: ${BACK_PORT}
      BACK_SENTRY_DSN: ${BACK_SENTRY_DSN}
      BACK_WALLET_RPC_HOST: ${BACK_WALLET_RPC_HOST}
      BACK_WALLET_RPC_PORT: ${BACK_WALLET_RPC_PORT}
    ports:
      - ${BACK_HOST_PORT}:${BACK_PORT}
  front:
    depends_on:
      - back
    build:
      context: ./
      dockerfile: resources/Dockerfile-front
    environment:
      REACT_APP_RPC_URL: ${BACK_RPC_URL}:${BACK_HOST_PORT}/rpc
      REACT_APP_SENTRY_DSN: ${REACT_APP_SENTRY_DSN}
    ports: 
      - ${FRONT_HOST_PORT}:${FRONT_PORT}